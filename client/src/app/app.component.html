<p-menubar [model]="mainNavItems()">
  <ng-template pTemplate="start">
    <a class="p-menuitem-link font-bold text-2xl mr-2" href="/">
      <span class="mr-1 mb-1">ðŸ’°</span>
      <span>PBA</span>
    </a>
  </ng-template>
  <ng-template pTemplate="item" let-item>
    @if (item.route) {
      <a class="p-menuitem-link" [routerLink]="item.route" [routerLinkActive]="['p-menuitem-active']">
        @if (item.icon) {
          <i class="mr-2" [class]="item.icon"></i>
        }
        <span>{{ item.label }}</span>
      </a>
    } @else if (item.url) {
      <a [href]="item.url" [target]="item.target" class="p-menuitem-link">
        @if (item.icon) {
          <i class="mr-2" [class]="item.icon"></i>
        }
        <span>{{ item.label }}</span>
      </a>
    }
  </ng-template>
  <ng-template pTemplate="end">
    @if (userInfo(); as userInfo) {
      <p-menu #menu [popup]="true" [model]="userMenuItems" styleClass="w-20rem">
        <ng-template pTemplate="start">
          <div class="p-2 pl-3">
            <span class="font-bold">{{ userInfo.name }}</span>
            @if (userInfo.isAdmin) {
              <span class="font-light ml-1">[Admin]</span>
            } @else if (userInfo.isFinance) {
              <span class="font-light ml-1">[Finance]</span>
            } @else if (userInfo.isSuperior) {
              <span class="font-light ml-1">[Superior]</span>
            }
          </div>
        </ng-template>
      </p-menu>
      @let avatarUrl = avatarUrl$ | async;
      <button class="p-button p-button-rounded p-button-text" [style.padding]="'0.4rem'" (click)="menu.toggle($event)">
        <p-avatar class="flex" [image]="avatarUrl ? avatarUrl : '/assets/avatar.svg'" shape="circle" />
      </button>
    }
  </ng-template>
</p-menubar>

<router-outlet *ngIf="!isIframe"></router-outlet>
